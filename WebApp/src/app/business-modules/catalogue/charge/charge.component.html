<!--begin:: subheader-->
<div class="m-subheader">
    <div class="d-flex align-items-center">
        <div class="mr-auto">
            <app-breadcrumb></app-breadcrumb>
        </div>
        <div class="c-button-actions">
            <button routerLink="/home/catalogue/charge-addnew" type="button" class="btn btn-success m-btn--square m-btn--icon m-btn--uppercase">
                <span>
                    <i class="la la-plus"></i>
                    <span>
                        add new
                    </span>
                </span>
            </button>
            <div class="dropdown m-dropdown m-dropdown--inline no-arrow">
                <button type="button" class="btn btn-brand m-btn--square m-btn--icon m-btn--uppercase dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span>
                        <i class="la la-download"></i>
                        <span>
                            import
                        </span>
                    </span>
                </button>
                <div class="dropdown-menu" aria-labelledby="">
                    <a routerLink="/home/catalogue/charge-import" class="dropdown-item" href="javascript:void(0)">Import charge</a>
                    <a routerLink="/home/catalogue/charge-import-account-voucher" class="dropdown-item" href="javascript:void(0)">Import account voucher</a>
                </div>
            </div>
            <button type="button" class="btn btn-danger m-btn--square m-btn--icon m-btn--uppercase" (click)="export()">
                <span>
                    <i class="la la-upload"></i>
                    <span>
                        export
                    </span>
                </span>
            </button>
        </div>
    </div>
</div>
<!--end:: subheader-->
<!--begin::m-content of charge-->
<div class="m-content">
    <!--begin:: m-portlet of search-form-->
    <div class="m-portlet">
        <div class="m-portlet__body">
            <!--begin::Form-->
            <div class="m-form">
                <div class="row">
                    <div class="col">
                        <div class="input-group m-input-group m-input-group--square">
                            <div class="input-group-prepend">
                                <button type="button" class="btn btn-secondary dropdown-toggle"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    {{selectedFilter}}
                                </button>
                                <div class="dropdown-menu">
                                    <a *ngFor="let filter of listFilter;let index=index;"
                                        [ngClass]="{ 'active': filter.filter == selectedFilter}"
                                        class="dropdown-item" href="javascript:void(0)" (click)="selectedFilter=filter.filter">
                                        {{filter.filter}}
                                    </a>
                                </div>
                            </div>
                            <input type="text" [(ngModel)]="searchKey" (change)="searchKey=searchKey.trim()"
                                class="form-control" aria-label="Text input with dropdown button">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" title="Search" (click)="searchCharge()">
                                    <i class="la la-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-auto">
                        <button type="reset" class="btn btn-block btn-default m-btn--square m-btn--icon m-btn--uppercase" (click)="resetSearch()">
                            <span>
                                <i class="la la-refresh"></i>
                                <span>
                                    Reset
                                </span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
            <!--end::Form-->
        </div>
    </div>
    <!--end::m-portlet of search-form-->
    <!--begin:: m-portlet of charge-table-->
    <div class="m-portlet">
        <div class="m-portlet__body">
            <!--begin: Datatable -->
            <div class="table-wrapper" id="">
                <table class="table table-striped table-brand dataTable">
                    <thead>
                        <tr>
                            <th class="table-actions-col no-sorting">Actions</th>
                            <th class="sorting" [ngClass]="{ 'sorting_asc ': (isDesc && sortKey == 'code'), 'sorting_desc': (!isDesc && sortKey == 'code') }"
                                (click)="sort('code')">
                                <span>Code</span>
                            </th>
                            <th class="sorting" [ngClass]="{ 'sorting_asc ': (isDesc && sortKey == 'chargeNameEn'), 'sorting_desc': (!isDesc && sortKey == 'chargeNameEn') }"
                                (click)="sort('chargeNameEn')">
                                <span>Name EN</span>
                            </th>
                            <th class="sorting" [ngClass]="{ 'sorting_asc ': (isDesc && sortKey == 'chargeNameVn'), 'sorting_desc': (!isDesc && sortKey == 'chargeNameVn') }"
                                (click)="sort('chargeNameVn')">
                                <span>Name Local</span>
                            </th>
                            <th class="sorting" [ngClass]="{ 'sorting_asc ': (isDesc && sortKey == 'type'), 'sorting_desc': (!isDesc && sortKey == 'type') }"
                                (click)="sort('type')">
                                <span>Type</span>
                            </th>
                            <th class="no-sorting">
                                <span>Inactive</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody *ngIf="ListCharges">
                        <ng-container *ngIf="ListCharges.length > 0; else noRecord">
                            <tr *ngFor="let item of ListCharges">
                                <td class="table-actions-col">
                                    <div class="table-actions" style="width: 70px">
                                        <button type="button" class="btn btn-success btn-sm m-btn--square m-btn--icon m-btn--icon-only" (click)="gotoEditPage(item.charge.id)"
                                            title="Edit stage">
                                            <i class="la la-edit"></i>
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm m-btn--square m-btn--icon m-btn--icon-only"
                                            title="Remove stage" data-toggle="modal" data-target="#confirm-delete-modal" (click)="prepareDeleteCharge(item.charge.id)">
                                            <i class="la la-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            
                                <td>
                                    <span>{{item.charge.code}}</span>
                                </td>
                                <td>
                                    <span>{{item.charge.chargeNameEn}}</span>
                                </td>
                                <td>
                                    <span>{{item.charge.chargeNameVn}}</span>
                                </td>
                                <td>
                                    <span>{{item.charge.type}}</span>
                                </td>
                                <td>
                                    <span>
                                        <label class="m-checkbox m-checkbox--state-primary m-checkbox--bold">
                                            <input type="checkbox" disabled [checked]="item.charge.inactive">
                                            <span></span>
                                        </label>
                                    </span>
                                </td>
                            </tr>
                            
                        </ng-container>
                    </tbody>
                    <ng-template #noRecord>
                        <tr>
                            <td colspan="6">
                                <div class="no-data">
                                    <i class="flaticon-coins"></i>
                                    <span class="no-data-text">No records found</span>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </table>
            </div>
            <!--end: Datatable -->
          <!--begin::pagination-->
          <app-pagination currentPage *ngIf="pager.totalItems>0" [config]="pager" (pageChange)="setPage($event)"
            (pagerObject)="setPage($event)"></app-pagination>
        <!--end::pagination-->
        </div>
    </div>
    <!--end:: m-portlet of charge-table-->
</div>
<!--end::m-content of charge-->


<!--begin::confirm-delete-modal-->
<div class="modal fade" id="confirm-delete-modal" data-backdrop="static" role="dialog" aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Notification</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-text-block">
                    <span>You want to delete this Charge?</span>
                </div>
            </div>
            <div class="modal-footer m--align-center c-button-actions">
                <button type="button" class="btn btn-brand m-btn--square m-btn--icon m-btn--uppercase" data-dismiss="modal" (click)="deleteCharge()"> 
                    <span>
                        <i class="la la-save"></i>
                        <span>
                            Yes
                        </span>
                    </span>
                </button>
                <button type="reset" class="btn m-btn--square m-btn--icon m-btn--uppercase" data-dismiss="modal">
                    <span>
                        <i class="la la-ban"></i>
                        <span>
                            Cancel
                        </span>
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>
<!--end::confirm-delete-modal-->