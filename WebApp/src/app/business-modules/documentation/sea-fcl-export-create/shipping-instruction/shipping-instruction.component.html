<form name="formShippingInstruction" #formShippingInstruction="ngForm" novalidate (ngSubmit)="formShippingInstruction.form.valid" *ngIf="isLoad">

<!--begin:: subheader-->
<div class="m-subheader">
    <div class="d-flex align-items-center">
        <div class="mr-auto">
            <!--begin:: breadcrumbs-->
            <!-- <app-breadcrumb></app-breadcrumb> -->
            <!--end:: breadcrumbs-->
        </div>
        <div class="c-button-actions">
            <div class="dropdown m-dropdown m-dropdown--inline">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">
                    Preview SI
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">Export excel</a>
                    <a class="dropdown-item" href="#">Crystal Report</a>
                </div>
            </div>
            <div class="dropdown m-dropdown m-dropdown--inline">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">
                    Preview OCL
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">Export excel</a>
                    <a class="dropdown-item" href="#">Crystal Report</a>
                </div>
            </div>
            <button type="button" class="btn btn-default m-btn--square m-btn--icon m-btn--uppercase" data-toggle="modal" data-target="#confirm-refresh-shipping-instruction-modal">
                <span>
                    <i class="la la-refresh"></i>
                    <span>
                        Refresh
                    </span>
                </span>
            </button>
            <button type="" class="btn btn-brand m-btn--square m-btn--icon m-btn--uppercase" (click)="save(formShippingInstruction)">
                <span>
                    <i class="la la-save"></i>
                    <span>
                        save
                    </span>
                </span>
            </button>
            <button type="button" *ngIf="shipment" class="btn m-btn--square m-btn--icon m-btn--uppercase" [routerLink]="['/home/documentation/sea-fcl-export-create/', { id: shipment.id }]">
                <span>
                    <i class="la la-ban"></i>
                    <span>
                        cancel
                    </span>
                </span>
            </button>
        </div>
    </div>
</div>
<!--end:: subheader-->
<!--begin::m-content-->
<div class="m-content">
    <div class="row">
        <div class="col-12">
            <ul class="nav nav-tabs m-tabs m-tabs-line m-tabs-line--brand" role="tablist">
                <li class="nav-item m-tabs__item">
                    <a class="nav-link m-tabs__link active" id="bill-instruction-tablink" href="#bill-instruction-tabview" data-toggle="tab" role="tab">
                        Bill Instruction
                    </a>
                </li>
                <li class="nav-item m-tabs__item">
                    <a class="nav-link m-tabs__link" id="bill-detail-tablink" href="#bill-detail-tabview" data-toggle="tab" role="tab">
                        Bill detail
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="tab-content" id="">
        <div class="tab-pane fade show active"  id="bill-instruction-tabview" role="tabpanel" aria-labelledby="">
            <div class="m-form m-form--state">
                <!--begin:: m-portlet-->
                <div class="m-portlet m-portlet--danger m-portlet--head-solid-bg m-portlet--bordered">
                    <div class="alert-block__heading">
                        <h3 class="alert-block__title">General Info</h3>
                    </div>
                    <div class="m-portlet__body">
                        <div class="m-form m-form--state">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group"  [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && refNo.invalid }">
                                        <label class="form-control-label" for="">
                                            Reference No <span class="m--font-danger">(*)</span>
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder=""
                                            name="refNo" [(ngModel)]="shippingIns.refNo" #refNo="ngModel"
                                            (change)="shippingIns.refNo = shippingIns.refNo.trim()" required disabled>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && refNo.invalid">
                                            Reference No is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Booking No
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            name="bookingNo" [(ngModel)]="shippingIns.bookingNo" #bookingNo="ngModel"
                                            (change)="shippingIns.bookingNo = shippingIns.bookingNo.trim()" >
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && issueDate == null }">
                                        <label class="form-control-label" for="">
                                            Date <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="m-input-icon m-input-icon--right">
                                            <input type="text" class="form-control m-input m-input--square" ngxDaterangepickerMd
                                                [autoApply]="true" [locale]="{applyLabel: 'ok', format: 'DD/MM/YYYY'}"
                                                [(ngModel)]="issueDate" [singleDatePicker]="true" name="issueDate" readonly />
                                            <span class="m-input-icon__icon m-input-icon__icon--right">
                                                <span>
                                                    <i class="la la-calendar"></i>
                                                </span>
                                            </span>
                                        </div>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && issueDate == null">
                                            Date is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.issuedUser == null }">
                                        <label class="form-control-label" for="">
                                            Issue By <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly
                                                data-toggle="dropdown" placeholder="Please selected" value=""
                                                [value]="shippingIns.issuedUserName == null?'Please selected issued user':shippingIns.issuedUserName" value="">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text" autocomplete="nope"
                                                                    placeholder="Search...">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>User Name</th>
                                                                        <th>Full Name</th>
                                                                        <th>Role</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover">
                                                            <tbody *ngIf="userIssues">
                                                                <tr *ngFor="let user of userIssues;let i = index;" class="data-row" 
                                                                    [ngClass]="{ 'data-selected': shippingIns.issuedUser!==null && shippingIns.issuedUser===user.id }" 
                                                                    data-id="{{user.id}}" 
                                                                    (click)="shippingIns.issuedUser = user.id; shippingIns.issuedUser = user.id; shippingIns.issuedUserName= user.username">
                                                                    <td>{{ user.username }}</td>
                                                                    <td>{{ user.employeeNameVn }}</td>
                                                                    <td>Cs</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.issuedUser == null">
                                            Issue by is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.supplier == null }">
                                        <label class="form-control-label" for="">
                                            Supplier <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly data-toggle="dropdown" 
                                                [value]="shippingIns.supplierName == null?'Please selected supplier':shippingIns.supplierName"
                                                placeholder="Please selected" value="">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text" autocomplete="nope"
                                                                    placeholder="Search..."  (keyup)="changeSupplier($event.target.value)">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Partner name</th>
                                                                        <th>Name ABBR</th>
                                                                        <th>Partner name</th>
                                                                        <th>Tax code</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover">
                                                            <tbody *ngIf="suppliers">
                                                                <tr class="data-row data-selected" *ngFor="let supplier of suppliers;let i = index;" 
                                                                    [ngClass]="{ 'data-selected': shippingIns.supplier!==null && shippingIns.supplier === supplier.id }" 
                                                                    data-id="{{supplier.id}}" 
                                                                    (click)="shippingIns.supplier = supplier.id; shippingIns.supplierName = supplier.partnerNameEn">
                                                                    <td>{{ supplier.accountNo }}</td>
                                                                    <td>{{ supplier.shortName }}</td>
                                                                    <td>{{ supplier.partnerNameEn }}</td>
                                                                    <td>{{ supplier.taxCode }}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.supplier == null">
                                            Supplier is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Attention
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            name="invoiceNoticeRecevier" [(ngModel)]="shippingIns.invoiceNoticeRecevier" #invoiceNoticeRecevier="ngModel"
                                            (change)="shippingIns.invoiceNoticeRecevier = shippingIns.invoiceNoticeRecevier.trim()" >
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.shipper == null }">
                                        <label class="form-control-label" for="">
                                            Shipper <span class="m--font-danger">(*)</span>
                                        </label>
                                        <textarea class="form-control m-input--square" id="" rows="5" autocomplete="nope" 
                                            name="shipper" [(ngModel)]="shippingIns.shipper" #shipper="ngModel"
                                            (change)="shippingIns.shipper = shippingIns.shipper.trim()" required >
                                        </textarea>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.shipper == null">
                                            Shipper is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && (shippingIns.consigneeId == null || consigneeDescription.invalid) }">
                                        <label class="form-control-label" for="">
                                            Consignee <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly data-toggle="dropdown" placeholder="Please selected" 
                                                [value]="shippingIns.consigneeName == null?'Please selected consignee':shippingIns.consigneeName">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text" autocomplete="nope"
                                                                    placeholder="Search..." (keyup)="changeConsignee($event.target.value)">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Partner name</th>
                                                                        <th>Name ABBR</th>
                                                                        <th>Partner name</th>
                                                                        <th>Tax code</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover">
                                                            <tbody *ngIf="consignees">
                                                                <tr class="data-row data-selected" *ngFor="let consignee of consignees;let i = index;" 
                                                                    [ngClass]="{ 'data-selected': shippingIns.consigneeId!==null && shippingIns.consigneeId === consignee.id }" 
                                                                    data-id="{{consignee.id}}" 
                                                                    (click)="shippingIns.consigneeId = consignee.id; shippingIns.consigneeName = consignee.partnerNameEn; getConsigneeDescription(consignee)">
                                                                    <td>{{ consignee.accountNo }}</td>
                                                                    <td>{{ consignee.shortName }}</td>
                                                                    <td>{{ consignee.partnerNameEn }}</td>
                                                                    <td>{{ consignee.taxCode }}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <textarea class="form-control m-input--square" id="" rows="3"  autocomplete="nope"
                                            name="consigneeDescription" [(ngModel)]="shippingIns.consigneeDescription" #consigneeDescription="ngModel"
                                            (change)="shippingIns.consigneeDescription = shippingIns.consigneeDescription.trim()" required></textarea>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && (shippingIns.consigneeId == null || consigneeDescription.invalid)">
                                            Consignee is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Notify Party
                                        </label>
                                        <textarea class="form-control m-input--square" id="" rows="5" autocomplete="nope"
                                            name="cargoNoticeRecevier" [(ngModel)]="shippingIns.cargoNoticeRecevier" #cargoNoticeRecevier="ngModel"
                                            (change)="shippingIns.cargoNoticeRecevier = shippingIns.cargoNoticeRecevier.trim()" >
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group" > 
                                        <label class="form-control-label" for="">
                                            Real Shipper
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly data-toggle="dropdown" placeholder="Please selected" 
                                                [value]="shippingIns.actualShipperName == null?'Please selected real shipper':shippingIns.actualShipperName">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text" autocomplete="nope"
                                                                    placeholder="Search..." (keyup)="changeRealShipper($event.target.value)">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Partner name</th>
                                                                        <th>Name ABBR</th>
                                                                        <th>Partner name</th>
                                                                        <th>Tax code</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover">
                                                            <tbody *ngIf="realShippers">
                                                                <tr class="data-row" *ngFor="let realShipper of realShippers;let i = index;"  
                                                                    [ngClass]="{ 'data-selected': shippingIns.actualShipperName!==null && shippingIns.actualShipperId === realShipper.id }" 
                                                                    data-id="{{realShipper.id}}" 
                                                                    (click)="shippingIns.actualShipperId = realShipper.id; shippingIns.actualShipperName = realShipper.partnerNameEn; getRealShipperDescription(realShipper)">
                                                                    <td>{{ realShipper.accountNo }}</td>
                                                                    <td>{{ realShipper.shortName }}</td>
                                                                    <td>{{ realShipper.partnerNameEn }}</td>
                                                                    <td>{{ realShipper.taxCode }}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <textarea class="form-control m-input--square" id="" rows="3" autocomplete="nope"
                                            name="actualShipperDescription" [(ngModel)]="shippingIns.actualShipperDescription" #actualShipperDescription="ngModel"
                                            (change)="shippingIns.actualShipperDescription = shippingIns.actualShipperDescription.trim()"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Real Consignee
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly data-toggle="dropdown" placeholder="Please selected" 
                                                [value]="shippingIns.actualConsigneeName == null?'Please selected real consignee':shippingIns.actualConsigneeName">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text" autocomplete="nope"
                                                                    placeholder="Search..." (keyup)="changeRealConsignee($event.target.value)">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Partner name</th>
                                                                        <th>Name ABBR</th>
                                                                        <th>Partner name</th>
                                                                        <th>Tax code</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover">
                                                            <tbody *ngIf="realConsignees">
                                                                <tr class="data-row data-selected" *ngFor="let realConsignee of realConsignees;let i = index;" 
                                                                    [ngClass]="{ 'data-selected': shippingIns.actualConsigneeName!==null && shippingIns.actualConsigneeId === realConsignee.id }" 
                                                                    data-id="{{realConsignee.id}}" 
                                                                    (click)="shippingIns.actualConsigneeId = realConsignee.id; shippingIns.actualConsigneeName = realConsignee.partnerNameEn; getRealConsigneeDescription(realConsignee)">
                                                                    <td>{{ realConsignee.accountNo }}</td>
                                                                    <td>{{ realConsignee.shortName }}</td>
                                                                    <td>{{ realConsignee.partnerNameEn }}</td>
                                                                    <td>{{ realConsignee.taxCode }}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <textarea class="form-control m-input--square" id="" rows="3" autocomplete="nope"
                                            name="actualConsigneeDescription" [(ngModel)]="shippingIns.actualConsigneeDescription" #actualConsigneeDescription="ngModel"
                                            (change)="shippingIns.actualConsigneeDescription = shippingIns.actualConsigneeDescription.trim()"></textarea>
                                    </div>
                                </div>
                                
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.paymenType == null }">
                                        <label class="form-control-label" for="">
                                            Payment Type <span class="m--font-danger">(*)</span>
                                        </label>
                                        <ng-select [allowClear]="true" [items]="paymentTerms"  [disabled]="disabled"
                                            [active]="paymentTermActive"
                                            (data)="refreshValue($event)" (selected)="shippingIns.paymenType = $event.id" 
                                            (removed)="shippingIns.paymenType = null"
                                            (typed)="typed($event)" placeholder="Please selected">
                                        </ng-select>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.paymenType == null">
                                            Payment Type is required
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Remark
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            name="remark" [(ngModel)]="shippingIns.remark" #remark="ngModel"
                                            (change)="shippingIns.remark = shippingIns.remark.trim()" >
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--end:: m-portlet-->
                <!--begin:: m-portlet-->
                <div class="m-portlet m-portlet--danger m-portlet--head-solid-bg m-portlet--bordered">
                    <div class="alert-block__heading">
                        <h3 class="alert-block__title">Route Info</h3>
                    </div>
                    <div class="m-portlet__body">
                        <div class="m-form m-form--state">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.pol == null }">
                                        <label class="form-control-label" for="">
                                            Port of Loading <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly required
                                                data-toggle="dropdown" [value]="shippingIns.polName == null?'Please selected port of loading':shippingIns.polName" value="">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text"
                                                                    (keyup)="changePortLoading($event.target.value)"
                                                                    placeholder="Search...">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Port Code</th>
                                                                        <th>Port Name</th>
                                                                        <th>Country</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover" *ngIf="portOfLadings">
                                                            <tbody *ngFor="let pol of portOfLadings;let i = index;">
                                                                <tr class="data-row" [ngClass]="{ 'data-selected': shippingIns.pol!==null && shippingIns.pol===pol.id }" data-id="{{pol.id}}" 
                                                                    (click)="shippingIns.pol = pol.id; shippingIns.polName= pol.nameEN">
                                                                    <td>{{ pol.code }}</td>
                                                                    <td>{{ pol.nameEN }}</td>
                                                                    <td>{{ pol.countryName }}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.pol == null">
                                            Port of Loading is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.pod == null }">
                                        <label class="form-control-label" for="">
                                            Port of Discharge <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="dropdown e--combogrid">
                                            <input class="form-control m-input m-input--square dropdown-toggle" type="text" readonly required
                                                data-toggle="dropdown" placeholder="Please selected"  [value]="shippingIns.podName == null?'Please selected port of discharge':shippingIns.podName">
                                            <div class="dropdown-menu e--combogrid-content">
                                                <div class="tabel-wrapper table-fixed">
                                                    <div class="table-head-fixed">
                                                        <div class="table-filter-block">
                                                            <div class="search-field">
                                                                <input class="form-control m-input m-input--square" type="text"
                                                                    (keyup)="changePortDestination($event.target.value)"
                                                                    placeholder="Search...">
                                                                <i class="icon-search"></i>
                                                            </div>
                                                        </div>
                                                        <div class="table-header">
                                                            <table class="table table-hover">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Port Code</th>
                                                                        <th>Port Name</th>
                                                                        <th>Country</th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="table-body-scroll">
                                                        <table class="table table-hover" *ngIf="portOfDestinations">
                                                            <tbody *ngFor="let pod of portOfDestinations;let i = index;">
                                                                <tr class="data-row" [ngClass]="{ 'data-selected': shippingIns.pod!==null && shippingIns.pod===pod.id }" data-id="{{pod.id}}" 
                                                                    (click)="shippingIns.pod = pod.id; shippingIns.pod=pod.id; shippingIns.podName= pod.nameEN; shippingIns.poDelivery = pod.nameEN">
                                                                    <td>{{ pod.code }}</td>
                                                                    <td>{{ pod.nameEN }}</td>
                                                                    <td>{{ pod.countryName }}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.pod == null">
                                            Port of Discharge is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.poDelivery == null }">
                                        <label class="form-control-label" for="">
                                            Place of Delivery <span class="m--font-danger">(*)</span>
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            name="poDelivery" [(ngModel)]="shippingIns.poDelivery" #poDelivery="ngModel"
                                            (change)="shippingIns.poDelivery = shippingIns.poDelivery.trim()">
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.poDelivery == null">
                                            Place of Delivery is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && shippingIns.voyNo == null }">
                                        <label class="form-control-label" for="">
                                            Vessel & Voy <span class="m--font-danger">(*)</span>
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            name="voyNo" [(ngModel)]="shippingIns.voyNo" #voyNo="ngModel"
                                            (change)="shippingIns.voyNo = shippingIns.voyNo.trim()">
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && shippingIns.voyNo == null">
                                            Vessel & Voy is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group" [ngClass]="{ 'm-form__group has-danger': formShippingInstruction.submitted && loadingDate == null }">
                                        <label class="form-control-label" for="">
                                            Loading Date <span class="m--font-danger">(*)</span>
                                        </label>
                                        <div class="m-input-icon m-input-icon--right">
                                            <input type="text" class="form-control m-input m-input--square" ngxDaterangepickerMd
                                                [autoApply]="true" [locale]="{applyLabel: 'ok', format: 'DD/MM/YYYY'}"
                                                [(ngModel)]="loadingDate" [singleDatePicker]="true" name="singledater" readonly />
                                            <span class="m-input-icon__icon m-input-icon__icon--right">
                                                <span>
                                                    <i class="la la-calendar"></i>
                                                </span>
                                            </span>
                                        </div>
                                        <div class="form-control-feedback" *ngIf="formShippingInstruction.submitted && loadingDate == null">
                                            Loading Dat is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--end:: m-portlet-->
                <!--begin:: m-portlet-->
                <div class="m-portlet m-portlet--danger m-portlet--head-solid-bg m-portlet--bordered">
                    <div class="alert-block__heading">
                        <h3 class="alert-block__title">Goods Info</h3>
                    </div>
                    <div class="m-portlet__body">
                        <div class="m-form m-form--state">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Container & Seal No
                                        </label>
                                        <textarea class="form-control m-input--square" id="" rows="5"
                                            autocomplete="nope"
                                            [(ngModel)]="shippingIns.containerSealNo" name="containerSealNo" 
                                            #containerSealNo="ngModel"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-8">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Description of Goods
                                        </label>
                                        <textarea class="form-control m-input--square" id="" rows="5"
                                            autocomplete="nope"
                                            [(ngModel)]="shippingIns.goodsDescription" name="goodsDescription" 
                                            #goodsDescription="ngModel"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Containers
                                        </label>
                                        <textarea class="form-control m-input--square" id="" rows="5"
                                            autocomplete="nope"
                                            [(ngModel)]="shippingIns.containerNote" name="containerNote" 
                                            #containerNote="ngModel"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Packages
                                        </label>
                                        <textarea class="form-control m-input--square" id="" rows="5" autocomplete="nope"
                                            [(ngModel)]="shippingIns.packagesNote" name="packagesNote" 
                                            #packagesNote="ngModel"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            Gross Weight
                                        </label>
                                        <input type="number" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            [(ngModel)]="shippingIns.grossWeight" name="grossWeight" min="0.01"
                                            appTwoDigitDecimaNumber #grossWeight="ngModel">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label" for="">
                                            CBM
                                        </label>
                                        <input type="text" class="form-control m-input m-input--square" placeholder="" autocomplete="nope"
                                            [(ngModel)]="shippingIns.volume" name="volume" min="0.01"
                                            appTwoDigitDecimaNumber #volume="ngModel">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--end:: m-portlet-->
            </div>
        </div>
        <div class="tab-pane fade" id="bill-detail-tabview" role="tabpanel" aria-labelledby="">
            <!--begin:: m-portlet-->
            <div class="m-portlet">
                <div class="m-portlet__body">
                    <!--begin: Datatable-->
                    <div class="table-wrapper table-scrollable">
                        <table class="table table-striped table-brand dataTable">
                            <thead>
                                <tr>
                                    <th class="no-sorting">
                                        <span>HBL No</span>
                                    </th>
                                    <th class="no-sorting">
                                        <span>Description</span>
                                    </th>
                                    <th class="no-sorting">
                                        <span>Shipping Marks</span>
                                    </th>
                                    <th class="no-sorting">
                                        <span>Containers</span>
                                    </th>
                                    <!-- <th class="no-sorting">
                                        <span>Packages</span>
                                    </th> -->
                                    <th class="no-sorting">
                                        <span>G.W</span>
                                    </th>
                                    <th class="no-sorting">
                                        <span>CBM</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="tbody-group" *ngIf="housebills">
                                <tr class="" *ngFor="let housebill of housebills;let i = index;">
                                    <td>
                                        <span>{{ housebill.hwbno }}</span>
                                    </td>
                                    <td>
                                        <span>{{ housebill.desOfGoods }}</span>
                                    </td>
                                    <td>
                                        <span>{{ housebill.shippingMark }}</span>
                                    </td>
                                    <td>
                                        <span>{{ housebill.packageContainer }}</span>
                                    </td>
                                    <!-- <td>
                                        <span>text</span>
                                    </td> -->
                                    <td>
                                        <span>{{ housebill.gw }}</span>
                                    </td>
                                    <td>
                                        <span>{{ housebill.cbm }}</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--end: Datatable-->
                </div>
            </div>
            <!--end:: m-portlet-->
        </div>
    </div>

</div>
<!--end::m-content-->

</form>
<!--begin::confirm-refresh-shipping-instruction-modal-->
<div class="modal fade" id="confirm-refresh-shipping-instruction-modal" data-backdrop="static" role="dialog" aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Alert</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-text-block">
                    <span>All manually entered data will be refresh. Are you sure you want to perform this action?</span>
                </div>
            </div>
            <div class="modal-footer m--align-center c-button-actions">
                <button type="button" class="btn btn-brand m-btn--square m-btn--icon m-btn--uppercase" data-dismiss="modal" (click)="refreshShippingInstruction()">
                    <span>
                        <i class="la la-save"></i>
                        <span>
                            Yes
                        </span>
                    </span>
                </button>
                <button type="reset" class="btn m-btn--square m-btn--icon m-btn--uppercase" data-dismiss="modal">
                    <span>
                        <i class="la la-ban"></i>
                        <span>
                            No
                        </span>
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>
<!--end::confirm-refresh-shipping-instruction-modal-->